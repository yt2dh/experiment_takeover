{% extends 'otree/WaitPage.html' %}

{{ block title }}
    <h1>Please wait while the other participants make their decisions.</h1>
{{ endblock }}

{{ block content }}

    <style> p {text-align: center; line-height: 32px;   /* within paragraph */
  margin-bottom: 30px; /* between paragraphs */}
            .paragraph2 {font-size: 18px;}
            #myDIV {
                      width: 100%;
                      padding: 50px 0;
                      text-align: center;
                      background-color: lightblue;
                      margin-top: 20px;
                    }
            h1 {  font-size: 32px;
                  text-align: center;
                  margin-bottom: 35px;
                }
    </style>

{{ if player.round_number > 1 }}
    <p class="paragraph2"> In the previous round, the value of the asset to the seller <b>$V</b> is <b>{{ prev_firm_value }}</b>. You are the <b>{{ prev_is_buyer}}</b>.</p>

    <p class="paragraph2"> The buyer's bid is <b><span style="color: #E57200">{{ prev_buyer_choice }}</b> and the seller <b><span style="color: #00008B">{{ prev_seller_choice }}</b> the bid.</p>

    <p class="paragraph2"> Your earnings from the previous round is <b><span style="color: #008000">{{ prev_payoff }}</b>, which may be randomly chosen for your final payment.</p>
{{ endif }}

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        //stackoverflow.com/questions/918792/
        $.extend({
            replaceTag: function (currentElem, newTagObj, keepProps) {
                var $currentElem = $(currentElem);
                var i, $newTag = $(newTagObj).clone();
                if (keepProps) {
                    newTag = $newTag[0];
                    newTag.className = currentElem.className;
                    $.extend(newTag.classList, currentElem.classList);
                    $.extend(newTag.attributes, currentElem.attributes);
                }
                $currentElem.wrapAll($newTag);
                $currentElem.contents().unwrap();
                return this;
            }
        });
        $.fn.extend({
            replaceTag: function (newTagObj, keepProps) {
                return this.each(function() {
                    jQuery.replaceTag(this, newTagObj, keepProps);
                });
            }
        });
        // here we rework the wait page to exactly mimic the content page -- lucas reddinger
        $('head > style').remove();
        $('body > div.container').removeClass('otree-wait-page');
        $('body > div.container').addClass('otree-body');
        $('body > div.container > div.card > div.card-body').addClass('_otree-content');
        $('body > div.container > div.card > div.card-body').removeClass('card-body');
        $('body > div.container > div.card').removeClass('card');
        $('#_otree-title').replaceTag($('<h2>').addClass('otree-title page-header').attr('id','_otree-title'), false);
        $('div.progress').hide();
    });
</script>

{{ endblock }}